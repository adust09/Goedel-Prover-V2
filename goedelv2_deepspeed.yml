name: goedelv2
channels:
  - nvidia
  - conda-forge
  - defaults
dependencies:
  # Core Python + tooling (same baseline as goedelv2.yml where applicable)
  - python=3.10.16
  - pip=25.1
  - setuptools=78.1.1
  - wheel

  # CUDA toolkit and build toolchain (needed to build DeepSpeed ops)
  - cuda-toolkit=12.4
  - gcc_linux-64=11.*
  - gxx_linux-64=11.*
  - ninja=1.11.*

  # Misc runtime libs used across the repo
  - libgcc-ng=11.2.0
  - libstdcxx-ng=11.2.0
  - libgomp=11.2.0
  - ca-certificates
  - openssl
  - readline
  - sqlite
  - zlib

  - pip:
      # PyTorch (install CUDA build explicitly after activation if needed)
      - torch==2.6.0
      - torchaudio==2.6.0
      - torchvision==0.21.0

      # Core project deps (copied from goedelv2.yml)
      - accelerate==0.33.0
      - aiohappyeyeballs==2.4.4
      - aiohttp==3.11.10
      - aiosignal==1.3.2
      - airportsdata==20250224
      - annotated-types==0.7.0
      - anthropic==0.52.2
      - anyio==4.7.0
      - astor==0.8.1
      - async-timeout==5.0.1
      - attrs==24.2.0
      - blake3==1.0.4
      - boto==2.49.0
      - cachetools==5.5.2
      - certifi==2024.12.14
      - cffi==1.17.1
      - charset-normalizer==3.4.0
      - click==8.1.7
      - cloudpickle==3.1.0
      - colorxs==1.0.1
      - compressed-tensors==0.9.3
      - contourpy==1.3.1
      - cryptography==43.0.3
      - cupy-cuda12x==13.4.1
      - cycler==0.12.1
      - datasets==3.2.0
      # Intentionally omit deepspeed here; install after CUDA toolkit is visible
      - deprecated==1.2.18
      - depyf==0.18.0
      - dill==0.3.8
      - diskcache==5.6.3
      - distro==1.9.0
      - dnspython==2.7.0
      - easydict==1.13
      - einops==0.8.0
      - email-validator==2.2.0
      - exceptiongroup==1.2.2
      - fastapi==0.115.6
      - fastapi-cli==0.0.7
      - fastrlock==0.8.3
      - filelock==3.16.1
      - fonttools==4.55.6
      - frozenlist==1.5.0
      - fsspec==2024.9.0
      - gguf==0.16.3
      - googleapis-common-protos==1.70.0
      - grpcio==1.71.0
      - h11==0.14.0
      - hf-xet==1.1.0
      - hjson==3.1.0
      - httpcore==1.0.7
      - httptools==0.6.4
      - httpx==0.28.1
      - huggingface-hub==0.31.1
      - idna==3.10
      - importlib-metadata==8.0.0
      - interegular==0.3.3
      - jinja2==3.1.4
      - jiter==0.8.2
      - jload==0.7.1
      - jsave==1.6.4
      - jsonschema==4.23.0
      - jsonschema-specifications==2024.10.1
      - kiwisolver==1.4.8
      - lark==1.2.2
      - listtypes==1.0.1
      - llguidance==0.7.19
      - llvmlite==0.44.0
      - lm-format-enforcer==0.10.11
      - markdown-it-py==3.0.0
      - markupsafe==3.0.2
      - matplotlib==3.10.0
      - mdurl==0.1.2
      - mistral-common==1.5.4
      - mpmath==1.3.0
      - msgpack==1.1.0
      - msgspec==0.18.6
      - multidict==6.1.0
      - multiprocess==0.70.16
      - networkx==3.4.2
      - ninja==1.11.1.3
      - numba==0.61.2
      - numpy==1.26.4
      - nvidia-cublas-cu12==12.4.5.8
      - nvidia-cuda-cupti-cu12==12.4.127
      - nvidia-cuda-nvrtc-cu12==12.4.127
      - nvidia-cuda-runtime-cu12==12.4.127
      - nvidia-cudnn-cu12==9.1.0.70
      - nvidia-cufft-cu12==11.2.1.3
      - nvidia-curand-cu12==10.3.5.147
      - nvidia-cusolver-cu12==11.6.1.9
      - nvidia-cusparse-cu12==12.3.1.170
      - nvidia-cusparselt-cu12==0.6.2
      - nvidia-ml-py==12.560.30
      - nvidia-nccl-cu12==2.21.5
      - nvidia-nvjitlink-cu12==12.4.127
      - nvidia-nvtx-cu12==12.4.127
      - openai==1.57.4
      - opencv-python-headless==4.11.0.86
      - opentelemetry-api==1.26.0
      - opentelemetry-exporter-otlp==1.26.0
      - opentelemetry-exporter-otlp-proto-common==1.26.0
      - opentelemetry-exporter-otlp-proto-grpc==1.26.0
      - opentelemetry-exporter-otlp-proto-http==1.26.0
      - opentelemetry-proto==1.26.0
      - opentelemetry-sdk==1.26.0
      - opentelemetry-semantic-conventions==0.47b0
      - opentelemetry-semantic-conventions-ai==0.4.7
      - outlines==0.1.11
      - outlines-core==0.1.26
      - pandas==1.4.3
      - partial-json-parser==0.2.1.1.post4
      - pillow==10.4.0
      - prometheus-client==0.21.1
      - prometheus-fastapi-instrumentator==7.0.0
      - propcache==0.2.1
      - protobuf==4.25.7
      - psutil==6.1.0
      - py-cpuinfo==9.0.0
      - pyairports==2.1.1
      - pyarrow==18.1.0
      - pycountry==24.6.1
      - pycparser==2.22
      - pydantic==2.10.3
      - pydantic-core==2.27.1
      - pyparsing==3.2.1
      - python-dotenv==1.0.1
      - python-json-logger==3.3.0
      - python-multipart==0.0.20
      - pytz==2022.1
      - pyyaml==6.0.2
      - ray==2.46.0
      - referencing==0.35.1
      - regex==2024.11.6
      - requests==2.32.3
      - rich==14.0.0
      - rich-toolkit==0.14.5
      - rpds-py==0.22.3
      - safetensors==0.4.5
      - scipy==1.15.1
      - sentencepiece==0.2.0
      - shellingham==1.5.4
      - smt-portfolio==1.0.0
      - sniffio==1.3.1
      - starlette==0.41.3
      - sympy==1.13.1
      - tabulate==0.9.0
      - termcolor==2.4.0
      - tiktoken==0.7.0
      - tokenizers==0.21.1
      - tqdm==4.67.1
      - transformers==4.51.3
      - triton==3.2.0
      - typer==0.15.3
      - urllib3==2.2.3
      - uvicorn==0.33.0
      - uvloop==0.21.0
      - vllm==0.8.5.post1
      - watchfiles==1.0.3
      - websockets==14.1
      - wrapt==1.17.2
      - xformers==0.0.29.post2
      - xgrammar==0.1.18
      - xxhash==3.5.0
      - yarl==1.18.3
      - zipp==3.21.0

# After activation, install DeepSpeed with CUDA ops via pip:
#   DS_BUILD_OPS=1 DS_BUILD_SPARSE_ATTN=0 DS_BUILD_QUANTIZE=0 DS_BUILD_AIO=0 \
#     CC=$CONDA_PREFIX/bin/x86_64-conda-linux-gnu-cc CXX=$CONDA_PREFIX/bin/x86_64-conda-linux-gnu-c++ \
#     pip install --no-build-isolation deepspeed==0.16.3

